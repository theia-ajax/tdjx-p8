pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
	g={}
	play_init()
end

function play_init()
	g.play={}
	g.st=g.play
	g.st.ents={}
	g.st.pl=add(g.st.ents,{
		x=8,y=8,dx=0,dy=0,
		w=0.25,h=0.25
	})
	
	_update=play_update
	_draw=play_draw
end

function play_update()
	player_update(g.st.pl)
end

function play_draw()
	cls()
	for e in all(g.st.ents) do
		local sx,sy=w2s(e.x,e.y)
		local sw,sh=w2s(e.w,e.h)
		rect(sx-sw-1,sy-sh-1,
			sx+sw,sy+sh,10)
	end
end

function w2s(wx,wy)
	return wx*8,wy*8
end
-->8
-- player

function player_update(self)
	local ix,iy=0,0
	if (btn(0,0)) ix-=1
	if (btn(1,0)) ix+=1
	if (btn(2,0)) iy-=1
	if (btn(3,0)) iy+=1
	ix,iy=norm(ix,iy)
	
	self.dx=ix*0.25
	
	self.x+=self.dx
	self.y+=self.dy
end


-->8
-- math

function len2(x,y) return x*x+y*y end
function len(x,y) return sqrt(len2(x,y)) end
function norm(x,y)
	local l=len(x,y)
	if (l==0) return 0,0
	return x/l,y/l
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
